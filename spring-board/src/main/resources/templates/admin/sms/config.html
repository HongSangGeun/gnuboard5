<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{admin/layout/layout}">

<head>
    <title>SMS 환경설정</title>
</head>

<body>
    <div layout:fragment="content">

        <div class="local_desc">
            <p>SMS 문자 발송을 위한 API 설정을 관리합니다.</p>
            <p>SMS 서비스 제공업체의 API 키와 발신번호를 입력해주세요.</p>
        </div>

        <form th:action="@{/mgmt/sms/config}" method="post">
            <input type="hidden" name="_csrf" th:value="${csrfToken}">

            <div class="tbl_frm01 tbl_wrap">
                <table>
                    <caption>SMS 환경설정</caption>
                    <colgroup>
                        <col class="grid_4">
                        <col>
                    </colgroup>
                    <tbody>
                        <tr>
                            <th scope="row"><label for="sms_enabled">SMS 사용</label></th>
                            <td>
                                <input type="checkbox" name="smsEnabled" id="sms_enabled" value="true"
                                       th:checked="${smsConfig.smsEnabled}">
                                <span class="chk_li">SMS 발송 기능을 사용합니다</span>
                            </td>
                        </tr>
                        <tr>
                            <th scope="row"><label for="api_key">API Key</label></th>
                            <td>
                                <input type="text" name="apiKey" id="api_key"
                                       th:value="${smsConfig.apiKey}"
                                       class="frm_input" style="width:100%;"
                                       placeholder="SMS 서비스 제공업체의 API 키를 입력하세요">
                            </td>
                        </tr>
                        <tr>
                            <th scope="row"><label for="api_secret">API Secret</label></th>
                            <td>
                                <input type="password" name="apiSecret" id="api_secret"
                                       th:value="${smsConfig.apiSecret}"
                                       class="frm_input" style="width:100%;"
                                       placeholder="SMS 서비스 제공업체의 API Secret을 입력하세요">
                            </td>
                        </tr>
                        <tr>
                            <th scope="row"><label for="from_number">발신번호</label></th>
                            <td>
                                <input type="text" name="fromNumber" id="from_number"
                                       th:value="${smsConfig.fromNumber}"
                                       class="frm_input" style="width:300px;"
                                       placeholder="예: 02-1234-5678">
                                <span class="frm_info">SMS 서비스에 등록된 발신번호를 입력하세요</span>
                            </td>
                        </tr>
                        <tr>
                            <th scope="row"><label for="provider">서비스 제공업체</label></th>
                            <td>
                                <select name="provider" id="provider" class="frm_input">
                                    <option value="" th:selected="${smsConfig.provider == null}">선택하세요</option>
                                    <option value="COOLSMS" th:selected="${smsConfig.provider == 'COOLSMS'}">쿨에스엠에스(CoolSMS)</option>
                                    <option value="ALIGO" th:selected="${smsConfig.provider == 'ALIGO'}">알리고(Aligo)</option>
                                    <option value="SOLAPI" th:selected="${smsConfig.provider == 'SOLAPI'}">솔라피(SOLAPI)</option>
                                    <option value="OTHER" th:selected="${smsConfig.provider == 'OTHER'}">기타</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th scope="row"><label for="api_url">API URL</label></th>
                            <td>
                                <input type="text" name="apiUrl" id="api_url"
                                       th:value="${smsConfig.apiUrl}"
                                       class="frm_input" style="width:100%;"
                                       placeholder="SMS API 엔드포인트 URL (기타 선택 시)">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="btn_fixed_top">
                <button type="submit" class="btn btn_submit">설정 저장</button>
                <a th:href="@{/mgmt/sms/test}" class="btn btn_03">테스트 발송</a>
                <a th:href="@{/mgmt/sms/history}" class="btn btn_02">발송 이력</a>
            </div>
        </form>

    </div>
</body>

</html>
